// swift-interface-format-version: 1.0
// swift-compiler-version: Apple Swift version 6.2 (swiftlang-6.2.0.19.9 clang-1700.3.19.1)
// swift-module-flags: -target x86_64-apple-ios14.0-simulator -enable-objc-interop -enable-library-evolution -swift-version 6 -enforce-exclusivity=checked -O -enable-experimental-feature DebugDescriptionMacro -module-name DianyaaiASR -package-name dianyaai_asr_ios_sdk_source
// swift-module-flags-ignorable:  -formal-cxx-interoperability-mode=off -interface-compiler-version 6.2
import AVFoundation
import Foundation
import OSLog
import Starscream
import Swift
import _Concurrency
import _StringProcessing
import _SwiftConcurrencyShims
public struct DianyaaiASRConfiguration : Swift.Sendable {
  public init(authToken: Swift.String, baseURL: Foundation.URL = URL(string: "https://api.dianyaai.com/api")!, webSocketURL: Foundation.URL = URL(string: "wss://ws.dianyaai.com/api/websocket")!)
}
public struct TranscriptionStatus : Swift.Codable, Swift.Sendable {
  public let status: Swift.String
  public let overviewMd: Swift.String?
  public let summaryMd: Swift.String?
  public let details: [DianyaaiASR.TranscriptionDetail]?
  public let message: Swift.String?
  public let usageId: Swift.String?
  public let suthTaskId: Swift.String?
  public let keywords: [Swift.String]?
  public let callbackHistory: [DianyaaiASR.CallbackHistoryItem]?
  public let taskType: Swift.String?
  public var type: DianyaaiASR.TranscriptionStatusType {
    get
  }
  #if compiler(>=5.3) && $NonescapableTypes
  public init(status: Swift.String, overviewMd: Swift.String?, summaryMd: Swift.String?, details: [DianyaaiASR.TranscriptionDetail]?, message: Swift.String?, usageId: Swift.String?, suthTaskId: Swift.String?, keywords: [Swift.String]?, callbackHistory: [DianyaaiASR.CallbackHistoryItem]?, taskType: Swift.String?)
  #endif
  public func encode(to encoder: any Swift.Encoder) throws
  public init(from decoder: any Swift.Decoder) throws
}
public enum TranscriptionStatusType : Swift.Equatable {
  case pending
  case running
  case done
  case failed
  case clientError
  case clientTimeout
  case unknown(Swift.String)
  public init(stringValue: Swift.String)
  public var isFailed: Swift.Bool {
    get
  }
  public static func == (a: DianyaaiASR.TranscriptionStatusType, b: DianyaaiASR.TranscriptionStatusType) -> Swift.Bool
}
public struct CallbackHistoryItem : Swift.Codable, Swift.Sendable {
  public let timestamp: Swift.String
  public let status: Swift.String
  public let code: Swift.Int
  public func encode(to encoder: any Swift.Encoder) throws
  public init(from decoder: any Swift.Decoder) throws
}
public struct TranscriptionDetail : Swift.Codable, Swift.Sendable {
  public let speaker: Swift.Int
  public let text: Swift.String
  public let startTime: Swift.Double
  public let endTime: Swift.Double
  public func encode(to encoder: any Swift.Encoder) throws
  public init(from decoder: any Swift.Decoder) throws
}
public enum RealTimeTranscriptionResult : Swift.Decodable, Swift.Encodable, Swift.Sendable {
  case asrResult(DianyaaiASR.RealTimeTranscriptionData)
  case asrResultPartial(DianyaaiASR.RealTimeTranscriptionData)
  case error(Swift.String)
  case stop
  public init(from decoder: any Swift.Decoder) throws
  public func encode(to encoder: any Swift.Encoder) throws
}
public struct RealTimeTranscriptionData : Swift.Codable, Swift.Sendable {
  public let speaker: Swift.Int
  public let text: Swift.String
  public let startTime: Swift.Int
  public let endTime: Swift.Int
  public func encode(to encoder: any Swift.Encoder) throws
  public init(from decoder: any Swift.Decoder) throws
}
public enum DianyaaiError : Swift.Error {
  case configurationError(Swift.String)
  case networkError(any Swift.Error)
  case invalidResponse
  case serverError(statusCode: Swift.Int, message: Swift.String)
  case decodingError(any Swift.Error)
  case transcriptionTimeout
  case invalidParameter(Swift.String)
}
extension DianyaaiASR.DianyaaiError : Foundation.LocalizedError, Swift.CustomStringConvertible {
  #if compiler(>=5.3) && $NonescapableTypes
  public var errorDescription: Swift.String? {
    get
  }
  #endif
  public var description: Swift.String {
    get
  }
}
public class DianyaaiASRAPI {
  #if compiler(>=5.3) && $NonescapableTypes
  public init(configuration: DianyaaiASR.DianyaaiASRConfiguration, httpClient: (any DianyaaiASR.HTTPClientProtocol)? = nil)
  #endif
  public static func createRealTimeTranscribeClient(authToken: Swift.String, baseURLString: Swift.String = "https://api.dianyaai.com/api", wsBaseURLString: Swift.String = "wss://ws.dianyaai.com/api/websocket", model: Swift.String = "speed", audioChunkSize: Swift.Int = 3200) -> DianyaaiASR.RealTimeTranscribeClient
  #if compiler(>=5.3) && $NonescapableTypes
  public func transcribeFile(fileURL: Foundation.URL, pollingInterval: Foundation.TimeInterval = 5, timeout: Foundation.TimeInterval = 7200, parameters: [Swift.String : Swift.String]? = ["model_name": "speed"]) -> (controller: any DianyaaiASR.FileTranscriptionController, dataStream: _Concurrency.AsyncStream<DianyaaiASR.TranscriptionStatus>)
  #endif
  @objc deinit
}
public protocol FileTranscriptionController : Swift.Sendable {
  func start() async
  func stop()
}
public protocol HTTPClientProtocol {
  #if compiler(>=5.3) && $NonescapableTypes
  func request<T>(endpoint: Swift.String, method: Swift.String, body: (any Swift.Encodable)?) async throws -> T where T : Swift.Decodable
  #endif
  #if compiler(>=5.3) && $NonescapableTypes
  func upload(endpoint: Swift.String, fileURL: Foundation.URL, parameters: [Swift.String : Swift.String]?) async throws -> (Foundation.Data, Foundation.URLResponse)
  #endif
}
public enum ServerMessage : Swift.Equatable, Swift.Sendable {
  case asrResult(DianyaaiASR.ASRResult)
  case asrResultPartial(DianyaaiASR.ASRResult)
  case error(DianyaaiASR.ServerError)
  case stop
  public static func == (a: DianyaaiASR.ServerMessage, b: DianyaaiASR.ServerMessage) -> Swift.Bool
}
public struct ASRResult : Swift.Decodable, Swift.Equatable, Swift.Sendable {
  public let speaker: Swift.Int
  public let speakerEmbedding: Swift.String?
  public let text: Swift.String
  public let startTime: Swift.Double
  public let endTime: Swift.Double
  public static func == (a: DianyaaiASR.ASRResult, b: DianyaaiASR.ASRResult) -> Swift.Bool
  public init(from decoder: any Swift.Decoder) throws
}
public struct ServerError : Swift.Decodable, Swift.Equatable, Swift.Sendable {
  public let data: Swift.String
  public static func == (a: DianyaaiASR.ServerError, b: DianyaaiASR.ServerError) -> Swift.Bool
  public init(from decoder: any Swift.Decoder) throws
}
public enum RealTimeTranscribeClientError : Swift.Error, Foundation.LocalizedError {
  case sessionFetchFailed(statusCode: Swift.Int)
  case sessionDecodeFailed
  case notConnected
  case connectFailed((any Swift.Error)?)
  #if compiler(>=5.3) && $NonescapableTypes
  public var errorDescription: Swift.String? {
    get
  }
  #endif
}
public enum ClientState : Swift.Equatable, Swift.Sendable {
  case idle
  case fetchingSession
  case connecting
  case connected
  case reconnecting(attempt: Swift.Int)
  case stopping
  case stopped((any Swift.Error)?)
  public static func == (lhs: DianyaaiASR.ClientState, rhs: DianyaaiASR.ClientState) -> Swift.Bool
  public var isConnected: Swift.Bool {
    get
  }
}
public actor RealTimeTranscribeClient {
  nonisolated public var stateStream: _Concurrency.AsyncStream<DianyaaiASR.ClientState> {
    get
  }
  nonisolated public var messageStream: _Concurrency.AsyncStream<DianyaaiASR.ServerMessage> {
    get
  }
  public init(baseURLString: Swift.String = "https://api.dianyaai.com/api", wsBaseURLString: Swift.String = "wss://ws.dianyaai.com/api/websocket", authToken: Swift.String, model: Swift.String = "speed", audioChunkSize: Swift.Int = 3200, session: Foundation.URLSession = .shared)
  @objc deinit
  public func connect() async
  public func disconnect()
  public func sendAudioChunk(_ data: Foundation.Data)
  public func stopSendingAudio()
  public func sendMicrophoneAudio(_ data: Foundation.Data, format: DianyaaiASR.RealTimeTranscribeClient.AudioStreamBasicDescription)
  public struct AudioStreamBasicDescription {
    public let sampleRate: Swift.Double
    public let channels: Swift.Int
    public let bitsPerSample: Swift.Int
    public init(sampleRate: Swift.Double, channels: Swift.Int, bitsPerSample: Swift.Int)
  }
  @available(iOS 13.0, tvOS 13.0, watchOS 6.0, macOS 10.15, *)
  @_semantics("defaultActor") nonisolated final public var unownedExecutor: _Concurrency.UnownedSerialExecutor {
    get
  }
}
